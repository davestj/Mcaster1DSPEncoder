<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mcaster1 DSP Encoder — Build &amp; Deploy How-To</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  :root {
    --blue:    #0ea5e9;
    --cyan:    #06b6d4;
    --green:   #22c55e;
    --purple:  #8b5cf6;
    --amber:   #f59e0b;
    --red:     #ef4444;
    --bg:      #f8fafc;
    --surface: #ffffff;
    --border:  #e2e8f0;
    --text:    #1f2937;
    --muted:   #6b7280;
    --code-bg: #0f172a;
    --code-fg: #e2e8f0;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; }

  /* Header */
  header {
    background: linear-gradient(135deg, #0f172a 0%, #1e3a5f 50%, #0ea5e9 100%);
    color: #fff; padding: 2.5rem 2rem 2rem;
  }
  header .logo { font-size: 0.75rem; letter-spacing: 0.15em; text-transform: uppercase; color: #94a3b8; margin-bottom: 0.5rem; }
  header h1 { font-size: 2rem; font-weight: 700; }
  header .sub { color: #94a3b8; margin-top: 0.4rem; font-size: 0.95rem; }
  header .badges { margin-top: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap; }
  .badge { display: inline-block; padding: 0.2rem 0.75rem; border-radius: 999px; font-size: 0.75rem; font-weight: 600; }
  .badge-blue   { background: #0ea5e9; color: #fff; }
  .badge-green  { background: #22c55e; color: #fff; }
  .badge-purple { background: #8b5cf6; color: #fff; }
  .badge-amber  { background: #f59e0b; color: #fff; }
  .badge-gray   { background: #475569; color: #fff; }

  /* Nav */
  nav { background: var(--surface); border-bottom: 1px solid var(--border); padding: 0.75rem 2rem; display: flex; gap: 1.25rem; flex-wrap: wrap; }
  nav a { color: var(--blue); text-decoration: none; font-size: 0.875rem; font-weight: 500; }
  nav a:hover { text-decoration: underline; }

  /* Layout */
  .container { max-width: 960px; margin: 0 auto; padding: 2rem; }

  /* Section headings */
  .step { margin: 2.5rem 0 1rem; display: flex; align-items: center; gap: 0.75rem; }
  .step-num { background: linear-gradient(135deg, var(--blue), var(--cyan)); color: #fff; width: 2rem; height: 2rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.875rem; flex-shrink: 0; }
  .step h2 { font-size: 1.25rem; font-weight: 700; color: var(--text); }
  h3 { font-size: 1rem; font-weight: 700; color: var(--blue); margin: 1.25rem 0 0.5rem; }

  /* Cards */
  .card { background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 1.25rem; margin-bottom: 1rem; }
  .card-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 1rem; margin-bottom: 1.5rem; }
  .target-card { background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 1.25rem; border-top: 3px solid var(--blue); }
  .target-card.winamp  { border-top-color: #0ea5e9; }
  .target-card.wacup   { border-top-color: #06b6d4; }
  .target-card.foobar  { border-top-color: #22c55e; }
  .target-card.radiodj { border-top-color: #8b5cf6; }
  .target-card.radioboss { border-top-color: #f59e0b; }
  .target-card h3 { margin-top: 0; font-size: 0.95rem; }
  .target-card .path { font-family: monospace; font-size: 0.75rem; color: var(--muted); background: var(--bg); border: 1px solid var(--border); border-radius: 4px; padding: 0.2rem 0.4rem; display: inline-block; margin: 0.4rem 0; }
  .target-card .plugin-dll { font-family: monospace; font-size: 0.8rem; color: var(--purple); font-weight: 600; }
  .target-card .activate { font-size: 0.8rem; color: var(--muted); margin-top: 0.5rem; }

  /* Code blocks */
  pre { background: var(--code-bg); color: var(--code-fg); border-radius: 8px; padding: 1rem 1.25rem; overflow-x: auto; font-size: 0.85rem; font-family: 'Cascadia Code', 'Consolas', 'Courier New', monospace; margin: 0.75rem 0 1rem; line-height: 1.5; }
  code { font-family: 'Cascadia Code', 'Consolas', 'Courier New', monospace; font-size: 0.85em; background: #e2e8f0; padding: 0.1em 0.35em; border-radius: 3px; color: #1e40af; }
  pre code { background: none; color: inherit; padding: 0; font-size: 1em; }

  /* Callouts */
  .callout { border-radius: 8px; padding: 0.9rem 1.1rem; margin: 0.75rem 0 1rem; display: flex; gap: 0.6rem; align-items: flex-start; font-size: 0.9rem; }
  .callout i { margin-top: 0.15rem; flex-shrink: 0; }
  .callout.info    { background: #eff6ff; border: 1px solid #bfdbfe; color: #1e40af; }
  .callout.info i  { color: #3b82f6; }
  .callout.warn    { background: #fffbeb; border: 1px solid #fde68a; color: #92400e; }
  .callout.warn i  { color: #f59e0b; }
  .callout.tip     { background: #f0fdf4; border: 1px solid #bbf7d0; color: #14532d; }
  .callout.tip i   { color: #22c55e; }

  /* Tables */
  table { width: 100%; border-collapse: collapse; font-size: 0.875rem; margin: 0.5rem 0 1.25rem; }
  th { background: #f1f5f9; font-weight: 600; text-align: left; padding: 0.6rem 0.75rem; border: 1px solid var(--border); color: var(--text); }
  td { padding: 0.5rem 0.75rem; border: 1px solid var(--border); vertical-align: top; }
  tr:nth-child(even) td { background: #f8fafc; }
  td code { font-size: 0.8em; }
  .admin-yes { color: var(--red); font-weight: 600; }
  .admin-no  { color: var(--muted); }

  /* Divider */
  hr { border: none; border-top: 1px solid var(--border); margin: 2rem 0; }

  /* Footer */
  footer { text-align: center; color: var(--muted); font-size: 0.8rem; padding: 2rem; border-top: 1px solid var(--border); margin-top: 3rem; }
</style>
</head>
<body>

<header>
  <div class="logo"><i class="fa-solid fa-tower-broadcast"></i> &nbsp;Mcaster1 Platform</div>
  <h1><i class="fa-solid fa-sliders"></i> &nbsp;Mcaster1 DSP Encoder</h1>
  <div class="sub">Build &amp; Deploy How-To — Windows (x86 / Win32)</div>
  <div class="badges">
    <span class="badge badge-blue">VS2022 / MSBuild</span>
    <span class="badge badge-purple">Win32 Release</span>
    <span class="badge badge-green">Winamp · WACUP · Foobar2000</span>
    <span class="badge badge-amber">RadioDJ · RadioBoss</span>
    <span class="badge badge-gray">NSIS Installer</span>
  </div>
</header>

<nav>
  <a href="#prereqs"><i class="fa-solid fa-list-check"></i> Prerequisites</a>
  <a href="#step1"><i class="fa-solid fa-magnifying-glass"></i> Find MSBuild</a>
  <a href="#step2"><i class="fa-solid fa-hammer"></i> Build Standalone</a>
  <a href="#step3"><i class="fa-solid fa-puzzle-piece"></i> Build Plugins</a>
  <a href="#step4"><i class="fa-solid fa-copy"></i> Copy DLLs</a>
  <a href="#step5"><i class="fa-solid fa-rocket"></i> Deploy</a>
  <a href="#step6"><i class="fa-solid fa-stethoscope"></i> Check Deps</a>
  <a href="#step7"><i class="fa-solid fa-box"></i> NSIS Installer</a>
  <a href="#ref"><i class="fa-solid fa-table"></i> Reference</a>
  <a href="#troubleshoot"><i class="fa-solid fa-bug"></i> Troubleshooting</a>
</nav>

<div class="container">

<!-- Prerequisites -->
<div id="prereqs" class="step"><div class="step-num"><i class="fa-solid fa-list-check"></i></div><h2>Prerequisites</h2></div>

<h3>PowerShell Execution Policy (one-time setup)</h3>
<p>Windows blocks unsigned scripts by default. Run this <strong>once</strong> in a normal PowerShell window:</p>
<pre><code>Set-ExecutionPolicy RemoteSigned -Scope CurrentUser</code></pre>
<p>Answer <code>Y</code> when prompted. Applies to your user account only and persists across sessions.</p>
<div class="callout info">
  <i class="fa-solid fa-circle-info"></i>
  <span>If you prefer not to change the policy, bypass it per-script: <code>powershell -ExecutionPolicy Bypass -File .\build-main.ps1</code></span>
</div>

<h3>Tools Required</h3>
<table>
  <tr><th>Tool</th><th>Version</th><th>Notes</th></tr>
  <tr><td>Visual Studio 2022</td><td>17.x</td><td>Professional or Community; <strong>Desktop development with C++</strong> workload required</td></tr>
  <tr><td>MSBuild</td><td>17.x</td><td>Included with VS2022 — no separate install needed</td></tr>
  <tr><td>vcpkg</td><td>any</td><td>Install at <code>C:\vcpkg</code>; use the <code>x86-windows</code> triplet</td></tr>
  <tr><td>NSIS</td><td>3.x</td><td>Nullsoft Scriptable Install System — only needed for building installers</td></tr>
  <tr><td>PowerShell</td><td>5.1+</td><td>Built into Windows 10/11 — no additional install</td></tr>
</table>

<h3>vcpkg Packages (x86-windows)</h3>
<pre><code>vcpkg install curl:x86-windows libmp3lame:x86-windows opus:x86-windows opusenc:x86-windows fdk-aac:x86-windows</code></pre>

<div class="callout info">
  <i class="fa-solid fa-circle-info"></i>
  <span><strong>external\lib\ DLLs</strong> — <code>ogg</code>, <code>vorbis</code>, <code>vorbisenc</code>, <code>libFLAC</code>, <code>pthreadVSE</code>, <code>iconv</code>, <code>libcurl</code>, and <code>bass</code> ship pre-built in the repo under <code>external\lib\</code>. Do not reinstall them via vcpkg.</span>
</div>

<hr>

<!-- Step 1 -->
<div id="step1" class="step"><div class="step-num">1</div><h2>Find MSBuild (one-time check)</h2></div>
<p>Run this from the project root to confirm MSBuild is where the build scripts expect it:</p>
<pre><code>.\find-msbuild.ps1</code></pre>
<p>Expected output:</p>
<pre><code>Found: C:\Program Files\Microsoft Visual Studio\2022\Professional\MSBuild\Current\Bin\MSBuild.exe</code></pre>

<hr>

<!-- Step 2 -->
<div id="step2" class="step"><div class="step-num">2</div><h2>Build the Standalone App</h2></div>
<p>Builds <code>Mcaster1DSPEncoder.exe</code> (Win32 Release) — the standalone streaming encoder GUI.</p>
<p>Output: <code>src\Release\Mcaster1DSPEncoder.exe</code></p>

<h3>Parameters</h3>
<table>
  <tr><th>Parameter</th><th>Type</th><th>Default</th><th>Description</th></tr>
  <tr><td><code>-Clean</code></td><td>switch</td><td>—</td><td>Run the MSBuild Clean target</td></tr>
  <tr><td><code>-Build</code></td><td>switch</td><td>—</td><td>Run the MSBuild Build target</td></tr>
  <tr><td><code>-Config</code></td><td>string</td><td><code>Release</code></td><td><code>Release</code> or <code>Debug</code></td></tr>
</table>
<div class="callout tip">
  <i class="fa-solid fa-lightbulb"></i>
  <span><strong>Default behaviour:</strong> when neither <code>-Clean</code> nor <code>-Build</code> is passed, both targets run (Clean + Build).</span>
</div>

<h3>Examples</h3>
<pre><code># Clean + Build (default)
.\build-main.ps1

# Clean only
.\build-main.ps1 -Clean

# Incremental build, no clean
.\build-main.ps1 -Build

# Debug build
.\build-main.ps1 -Config Debug

# Clean then Debug build
.\build-main.ps1 -Clean -Build -Config Debug</code></pre>

<h3>Manual MSBuild equivalent</h3>
<pre><code>& "C:\Program Files\Microsoft Visual Studio\2022\Professional\MSBuild\Current\Bin\MSBuild.exe" `
    src\Mcaster1DSPEncoder.sln `
    /p:Configuration=Release /p:Platform=Win32 /t:Clean,Build /m /v:normal</code></pre>

<hr>

<!-- Step 3 -->
<div id="step3" class="step"><div class="step-num">3</div><h2>Build the Plugins</h2></div>

<table>
  <tr><th>Plugin</th><th>Solution</th><th>Output DLL</th><th>Targets</th></tr>
  <tr><td>Winamp DSP</td><td><code>src\mcaster1_winamp.sln</code></td><td><code>src\Release\dsp_mcaster1.dll</code></td><td>Winamp, WACUP, RadioBoss</td></tr>
  <tr><td>Foobar2000</td><td><code>src\mcaster1_foobar.sln</code></td><td><code>src\Release\foo_mcaster1.dll</code></td><td>Foobar2000</td></tr>
  <tr><td>RadioDJ v2</td><td><code>src\mcaster1_radiodj.sln</code></td><td><code>src\Release\dsp_radiodj.dll</code></td><td>RadioDJ v2</td></tr>
</table>

<div class="callout tip">
  <i class="fa-solid fa-lightbulb"></i>
  <span><strong>RadioBoss</strong> uses the Winamp DSP plugin interface — deploy <code>dsp_mcaster1.dll</code> (same DLL as Winamp). No separate RadioBoss build needed.</span>
</div>

<h3>Parameters</h3>
<table>
  <tr><th>Parameter</th><th>Type</th><th>Default</th><th>Description</th></tr>
  <tr><td><code>-Clean</code></td><td>switch</td><td>—</td><td>Run the MSBuild Clean target</td></tr>
  <tr><td><code>-Build</code></td><td>switch</td><td>—</td><td>Run the MSBuild Build target</td></tr>
  <tr><td><code>-Config</code></td><td>string</td><td><code>Release</code></td><td><code>Release</code> or <code>Debug</code></td></tr>
  <tr><td><code>-Plugin</code></td><td>string</td><td><code>all</code></td><td><code>all</code>, <code>winamp</code>, <code>foobar</code>, or <code>radiodj</code></td></tr>
</table>
<div class="callout tip">
  <i class="fa-solid fa-lightbulb"></i>
  <span><strong>Default behaviour:</strong> when neither <code>-Clean</code> nor <code>-Build</code> is passed, both targets run (Clean + Build).</span>
</div>

<h3>Examples</h3>
<pre><code># Clean + Build all plugins (default)
.\build-plugins.ps1

# Incremental build of all plugins, no clean
.\build-plugins.ps1 -Build

# Clean only, all plugins
.\build-plugins.ps1 -Clean

# Build the Winamp plugin only
.\build-plugins.ps1 -Plugin winamp

# Incremental build of Foobar2000 plugin only
.\build-plugins.ps1 -Plugin foobar -Build

# Full clean + Debug build of RadioDJ plugin only
.\build-plugins.ps1 -Plugin radiodj -Clean -Build -Config Debug

# Debug build of all plugins
.\build-plugins.ps1 -Config Debug</code></pre>

<h3>Manual build — individual plugin</h3>
<pre><code># Winamp plugin only
& "C:\Program Files\Microsoft Visual Studio\2022\Professional\MSBuild\Current\Bin\MSBuild.exe" `
    src\mcaster1_winamp.sln `
    /p:Configuration=Release /p:Platform=Win32 /t:Build /m /v:normal</code></pre>

<hr>

<!-- Step 4 -->
<div id="step4" class="step"><div class="step-num">4</div><h2>Copy Runtime DLLs to Release\</h2></div>
<p>After building, stage the codec DLLs alongside the output binaries:</p>
<pre><code>.\copy-dlls.ps1</code></pre>
<p>This copies from <code>external\lib\</code> into <code>src\Release\</code>:</p>
<table>
  <tr><th>DLL</th><th>Source</th><th>Purpose</th></tr>
  <tr><td><code>ogg.dll</code></td><td>external\lib\</td><td>Ogg container format</td></tr>
  <tr><td><code>vorbis.dll</code></td><td>external\lib\</td><td>Vorbis decoder</td></tr>
  <tr><td><code>vorbisenc.dll</code></td><td>external\lib\</td><td>Vorbis encoder</td></tr>
  <tr><td><code>libFLAC.dll</code></td><td>external\lib\</td><td>FLAC encoder/decoder</td></tr>
  <tr><td><code>pthreadVSE.dll</code></td><td>external\lib\</td><td>POSIX threads for Windows</td></tr>
  <tr><td><code>libcurl.dll</code></td><td>external\lib\</td><td>HTTP/HTTPS streaming transport</td></tr>
  <tr><td><code>iconv.dll</code></td><td>external\lib\</td><td>Character encoding conversion</td></tr>
  <tr><td><code>bass.dll</code></td><td>external\lib\</td><td>BASS audio library</td></tr>
  <tr><td><code>libmp3lame.dll</code></td><td>vcpkg x86-windows\bin\</td><td>MP3 encoder (LAME)</td></tr>
  <tr><td><code>fdk-aac.dll</code></td><td>vcpkg x86-windows\bin\</td><td>AAC / HE-AAC encoder (FDK)</td></tr>
  <tr><td><code>opus.dll</code></td><td>vcpkg x86-windows\bin\</td><td>Opus decoder</td></tr>
  <tr><td><code>opusenc.dll</code></td><td>vcpkg x86-windows\bin\</td><td>Opus encoder</td></tr>
</table>

<hr>

<!-- Step 5 -->
<div id="step5" class="step"><div class="step-num">5</div><h2>Deploy to Host Applications</h2></div>

<div class="callout warn">
  <i class="fa-solid fa-triangle-exclamation"></i>
  <span>All deploy scripts must be run <strong>as Administrator</strong>. Right-click PowerShell → <em>Run as Administrator</em>, then execute the script.</span>
</div>

<div class="card-grid">

  <!-- Winamp -->
  <div class="target-card winamp">
    <h3><i class="fa-solid fa-music"></i> Winamp</h3>
    <div class="path">C:\Program Files (x86)\Winamp</div>
    <div class="plugin-dll">dsp_mcaster1.dll → Plugins\</div>
    <pre style="margin-top:0.5rem"><code>.\deploy-winamp.ps1</code></pre>
    <div class="activate"><strong>Activate:</strong> Options → Preferences → Plugins → DSP/Effect → <em>Mcaster1 DSP Encoder</em></div>
  </div>

  <!-- WACUP -->
  <div class="target-card wacup">
    <h3><i class="fa-solid fa-music"></i> WACUP</h3>
    <div class="path">C:\Program Files\WACUP</div>
    <div class="plugin-dll">dsp_mcaster1.dll → Plugins\</div>
    <pre style="margin-top:0.5rem"><code>.\deploy-wacup.ps1</code></pre>
    <div class="activate"><strong>Activate:</strong> Preferences → Plug-ins → DSP/Effect → <em>Mcaster1 DSP Encoder</em></div>
  </div>

  <!-- Foobar2000 -->
  <div class="target-card foobar">
    <h3><i class="fa-solid fa-headphones"></i> Foobar2000</h3>
    <div class="path">C:\Program Files\foobar2000</div>
    <div class="plugin-dll">foo_mcaster1.dll → components\</div>
    <pre style="margin-top:0.5rem"><code>.\deploy-foobar.ps1</code></pre>
    <div class="activate"><strong>Activate:</strong> File → Preferences → Playback → DSP Manager → add <em>Mcaster1 DSP Encoder</em></div>
  </div>

  <!-- RadioDJ -->
  <div class="target-card radiodj">
    <h3><i class="fa-solid fa-radio"></i> RadioDJ v2</h3>
    <div class="path">C:\RadioDJv2</div>
    <div class="plugin-dll">dsp_radiodj.dll → RadioDJ root</div>
    <pre style="margin-top:0.5rem"><code>.\deploy-radiodj.ps1</code></pre>
    <div class="activate"><strong>Activate:</strong> Settings → Sound → DSP Plugin → browse to <em>dsp_radiodj.dll</em></div>
  </div>

  <!-- RadioBoss -->
  <div class="target-card radioboss">
    <h3><i class="fa-solid fa-tower-cell"></i> RadioBoss</h3>
    <div class="path">C:\Program Files (x86)\RadioBoss</div>
    <div class="plugin-dll">dsp_mcaster1.dll → Plugins\ (Winamp DSP)</div>
    <pre style="margin-top:0.5rem"><code>.\deploy-radioboss.ps1</code></pre>
    <div class="activate"><strong>Activate:</strong> Options → DSP/Effect Plugins → Add → select <em>dsp_mcaster1.dll</em></div>
  </div>

</div>

<hr>

<!-- Step 6 -->
<div id="step6" class="step"><div class="step-num">6</div><h2>Check Dependencies (diagnostic)</h2></div>
<p>Verify all required DLLs are resolvable for the standalone executable:</p>
<pre><code>.\check-deps.ps1</code></pre>
<p>Uses <code>dumpbin /DEPENDENTS</code> from the VS2022 toolchain. Compare output against the DLL table above — any listed DLL not present in the application folder will cause a startup crash.</p>

<hr>

<!-- Step 7 -->
<div id="step7" class="step"><div class="step-num">7</div><h2>Build NSIS Installers</h2></div>

<div class="callout info">
  <i class="fa-solid fa-circle-info"></i>
  <span>Run NSIS from a <strong>regular</strong> command prompt (not elevated). The NSIS scripts in <code>src\</code> are being migrated from legacy Edcast/AltaCast naming to Mcaster1DSPEncoder as part of Phase 2 — see <code>ROADMAP.md</code>.</span>
</div>

<p>Complete <strong>Steps 2–4</strong> first to ensure all binaries and DLLs are in <code>src\Release\</code>.</p>

<table>
  <tr><th>Installer</th><th>Command</th><th>Output</th></tr>
  <tr>
    <td>Standalone</td>
    <td><code>"C:\Program Files (x86)\NSIS\makensis.exe" src\mcaster1_standalone.nsi</code></td>
    <td><code>src\Mcaster1DSPEncoder-Setup.exe</code></td>
  </tr>
  <tr>
    <td>Winamp Plugin</td>
    <td><code>"C:\Program Files (x86)\NSIS\makensis.exe" src\mcaster1_winamp.nsi</code></td>
    <td><code>src\Mcaster1DSPEncoder-Winamp-Setup.exe</code></td>
  </tr>
  <tr>
    <td>Foobar2000 Plugin</td>
    <td><code>"C:\Program Files (x86)\NSIS\makensis.exe" src\mcaster1_foobar.nsi</code></td>
    <td><code>src\Mcaster1DSPEncoder-Foobar2000-Setup.exe</code></td>
  </tr>
  <tr>
    <td>RadioDJ Plugin</td>
    <td><code>"C:\Program Files (x86)\NSIS\makensis.exe" src\mcaster1_radiodj.nsi</code></td>
    <td><code>src\Mcaster1DSPEncoder-RadioDJ-Setup.exe</code></td>
  </tr>
</table>

<hr>

<!-- Reference -->
<div id="ref" class="step"><div class="step-num"><i class="fa-solid fa-table"></i></div><h2>Quick Reference — All Scripts</h2></div>

<table>
  <tr><th>Script</th><th>Purpose</th><th>Run as Admin?</th></tr>
  <tr><td><code>find-msbuild.ps1</code></td><td>Locate MSBuild.exe on this machine</td><td class="admin-no">No</td></tr>
  <tr><td><code>build-main.ps1 [-Clean] [-Build] [-Config Release|Debug]</code></td><td>Build standalone <code>Mcaster1DSPEncoder.exe</code></td><td class="admin-no">No</td></tr>
  <tr><td><code>build-plugins.ps1 [-Clean] [-Build] [-Config Release|Debug] [-Plugin all|winamp|foobar|radiodj]</code></td><td>Build plugin DLLs</td><td class="admin-no">No</td></tr>
  <tr><td><code>copy-dlls.ps1</code></td><td>Stage codec DLLs into <code>src\Release\</code></td><td class="admin-no">No</td></tr>
  <tr><td><code>deploy-winamp.ps1</code></td><td>Deploy to Winamp <code>Plugins\</code></td><td class="admin-yes">Yes</td></tr>
  <tr><td><code>deploy-wacup.ps1</code></td><td>Deploy to WACUP <code>Plugins\</code></td><td class="admin-yes">Yes</td></tr>
  <tr><td><code>deploy-foobar.ps1</code></td><td>Deploy to Foobar2000 <code>components\</code></td><td class="admin-yes">Yes</td></tr>
  <tr><td><code>deploy-radiodj.ps1</code></td><td>Deploy to RadioDJ v2 root</td><td class="admin-yes">Yes</td></tr>
  <tr><td><code>deploy-radioboss.ps1</code></td><td>Deploy to RadioBoss <code>Plugins\</code></td><td class="admin-yes">Yes</td></tr>
  <tr><td><code>check-deps.ps1</code></td><td>Verify DLL dependencies via dumpbin</td><td class="admin-no">No</td></tr>
</table>

<hr>

<!-- Troubleshooting -->
<div id="troubleshoot" class="step"><div class="step-num"><i class="fa-solid fa-bug"></i></div><h2>Troubleshooting</h2></div>

<div class="card">
  <h3>Script blocked — "running scripts is disabled"</h3>
  <p>Run this once in a normal PowerShell window, then retry:</p>
  <pre><code>Set-ExecutionPolicy RemoteSigned -Scope CurrentUser</code></pre>
</div>

<div class="card">
  <h3>Build sits silently with no output</h3>
  <p>This was a bug in the old build scripts — they buffered all MSBuild output into a variable, filtered it, then printed only errors. The scripts now use <code>/v:normal</code> and stream output directly to the console. Pull the latest version of <code>build-main.ps1</code> and <code>build-plugins.ps1</code>.</p>
</div>

<div class="card">
  <h3>MSBuild not found</h3>
  <p>Run <code>.\find-msbuild.ps1</code>. If output is empty, open the Visual Studio Installer and confirm the <strong>Desktop development with C++</strong> workload is installed.</p>
</div>

<div class="card">
  <h3>Missing DLL at runtime (startup crash)</h3>
  <p>Run <code>.\check-deps.ps1</code> and compare output against the DLL table above. Copy any missing DLL from <code>external\lib\</code> or <code>C:\vcpkg\installed\x86-windows\bin\</code> into the application folder.</p>
</div>

<div class="card">
  <h3>Plugin not visible in Winamp / WACUP</h3>
  <p>Confirm <code>dsp_mcaster1.dll</code> is in the <code>Plugins\</code> <em>subfolder</em>, not the root. All runtime DLLs must be in the Winamp/WACUP <strong>root</strong> (same folder as <code>winamp.exe</code>). Restart Winamp after copying.</p>
</div>

<div class="card">
  <h3>Plugin not visible in Foobar2000</h3>
  <p>Confirm <code>foo_mcaster1.dll</code> is in the <code>components\</code> folder. Foobar2000 scans components only on startup — restart it after deploying.</p>
</div>

<div class="card">
  <h3>NSIS compiler: file not found</h3>
  <p>Ensure <code>.\copy-dlls.ps1</code> has been run so all DLLs exist in <code>src\Release\</code> before invoking <code>makensis.exe</code>.</p>
</div>

<div class="card">
  <h3>Deploy script: "Access Denied"</h3>
  <p>Deploy scripts write into <code>Program Files</code> — they require Administrator rights. Right-click PowerShell → <em>Run as Administrator</em>, then run the script.</p>
</div>

</div><!-- /container -->

<footer>
  Mcaster1 DSP Encoder &mdash; derived from Edcast / AltaCast (GNU GPL v2) &mdash;
  Maintained by <a href="mailto:davestj@gmail.com">davestj@gmail.com</a> &mdash;
  <a href="https://github.com/davestj/Mcaster1DSPEncoder">github.com/davestj/Mcaster1DSPEncoder</a>
</footer>

</body>
</html>
